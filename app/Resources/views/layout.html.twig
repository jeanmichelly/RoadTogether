{# app/Resources/views/layout.html.twig #}

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>{% block title %}CV Plateforme{% endblock %}</title>

   {% block stylesheets %}
      {% stylesheets output='css/main.css' filter='cssrewrite, ?yui_css'
        'css/*' %}
        <link rel="stylesheet" href="{{ asset_url }}" type="text/css" />
      {% endstylesheets %}
    {% endblock %}
</head>



<body>
  <div class="container">
    <div id="header" class="hero-unit">
      <h1>Ma plateforme d'annonces</h1>
      <p>
        Ce projet est propulsé par Symfony2,
        et construit grâce au MOOC OpenClassrooms et SensioLabs.
      </p>
      <p>
        <a class="btn btn-primary btn-lg" href="http://fr.openclassrooms.com/informatique/cours/developpez-votre-site-web-avec-le-framework-symfony2">
          Participer au MOOC »
        </a>
      </p>
    </div>


    <div class="row">
      <div id="menu" class="span3">
        <h3>Les annonces</h3>
        <ul class="nav nav-pills nav-stacked">
          <li><a href="{{ path('cv_platform_home') }}">Accueil</a></li>
           <li><a href="{{ path('cv_platform_search_rides') }}">Rechercher des annonces</a> </li>
          <li><a href="{{ path('cv_platform_add') }}">Ajouter une annonce</a> </li>
          <li><a href="{{ path('cv_platform_my_rides') }}">Mes annonces</a> </li>
          <li><a href="{{ path('cv_profile_edit') }}">Mon profil</a> </li>
        </ul>
       
         {# On affiche un coin espace membre :
             * Si le membre est identifiÃ© : lien de dÃ©connexion
             * Sinon : formulaire de connexion #}
          {% if is_granted('IS_AUTHENTICATED_REMEMBERED') %}
            <h3>Membre</h3>
            <ul class="nav nav-pills nav-stacked">
              <li>{{ 'layout.logged_in_as'|trans({'%username%': app.user.username}, 'FOSUserBundle') }}</li>
              <li><a href="{{ path('fos_user_security_logout') }}">{{ 'layout.logout'|trans({}, 'FOSUserBundle') }}</a></li>
            </ul>
          {# On affiche le formulaire de login, sauf sur la page de connexion #}
          {% elseif app.request.attributes.get('_route') != 'fos_user_security_login' %}
            <h3>Identification</h3>
            {{ render(controller('CVUserBundle:Security:login')) }}
          {% endif %}


      </div>
      <div id="content" class="span9">
        {% block body %}
        {% endblock %}
      </div>

    </div>

    <hr>

    <footer>
      <p>The sky's the limit © {{ 'now'|date('Y') }} and beyond.</p>
    </footer>
  </div>

    {% block javascripts %}
      {# jQuery depuis le CDN de Google, ou fallback sur une copie locale #}
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
      <script>window.jQuery || document.write('<script src="{{ asset('js/jquery.min.js') }}"><\/script>')</script>
      {# Tous nos javascripts avec Assetic #}
      {% javascripts output='js/main.js' filter='?yui_js'
         'js/*' %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
      {% endjavascripts %}
    {% endblock %}

</body>
</html>