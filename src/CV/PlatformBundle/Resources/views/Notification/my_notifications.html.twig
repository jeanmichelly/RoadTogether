{% extends "CVPlatformBundle::layout.html.twig" %}

{% block title %}
    Laisser un avis - {{ parent() }}
{% endblock %}

{% block cvplatform_body %}
    <h2>Notifications</h2>

	<table id="mytable" class="table table-bordred table-striped">
		<tbody>
			{% for ratingNotification in listRatingNotifications %}
				{% include 'CVPlatformBundle:Notification:rating.html.twig' with {'ratingNotification': ratingNotification} %}
    		{% endfor %}
		</tbody>
	</table>

	<ul class="pagination">
        {% for p in range(1, nbPages) %}
            <li{% if p == page %} class="active"{% endif %}><a href="{{ path('cv_platform_current_reservations', {'page': p}) }}">{{ p }}</a></li>
        {% endfor %}
    </ul>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        $( ".delete" ).click(function() {
            var notifId = this.id;
            var param = "notifId="+notifId;
            $.ajax({
                url: "{{ path('cv_platform_delete_notification') }}",
                data: param,
                success: function(data) {
                    //$("#numberNotify").html( {{ app.session.get('numberNotify') }} );
                    $('#notif_'+notifId).remove();       
                    window.location.replace("{{ path('cv_platform_my_notifications') }}");
                }
            }); 
        });
    </script>   
{% endblock %}